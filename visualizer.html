<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starship Entropy | Orbital Dynamics</title>
    <!-- Scripts for React, Babel, Tailwind, and Lucide -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@0.344.0/dist/umd/lucide-react.js"></script>
    <style>
        @keyframes spin-slow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .animate-spin-slow {
            animation: spin-slow 8s linear infinite;
        }

        body,
        html,
        #root {
            height: 100%;
            margin: 0;
            background: #020617;
            /* slate-950 */
        }
    </style>
</head>

<body class="bg-slate-950">
    <div id="root"></div>

    <script type="text/babel">
        // Debugging logs
        console.log("Starship Entropy Visualizer: Initialization started.");

        const { useState, useEffect, useRef } = React;

        // Lucide fallback
        const Lucide = window.LucideReact || {};
        const {
            Activity = () => <span>[A]</span>,
            Thermometer = () => <span>[T]</span>,
            RefreshCw = () => <span>[R]</span>,
            BarChart3 = () => <span>[B]</span>,
            Layers = () => <span>[L]</span>,
            Zap = () => <span>[Z]</span>,
            ShieldAlert = () => <span>[S]</span>,
            Info = () => <span>[I]</span>
        } = Lucide;

        // --- Compact 3D Entropy Curve ---
        const EntropyCanvas = ({ launchFrequency, materialStress }) => {
            const canvasRef = useRef(null);

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let animationFrame;

                const draw = () => {
                    const w = canvas.width;
                    const h = canvas.height;
                    ctx.clearRect(0, 0, w, h);

                    // Draw Grid
                    ctx.strokeStyle = '#1e293b';
                    ctx.lineWidth = 1;
                    for (let i = 0; i < 10; i++) {
                        ctx.beginPath();
                        ctx.moveTo(i * (w / 10), 0); ctx.lineTo(i * (w / 10), h); ctx.stroke();
                        ctx.beginPath();
                        ctx.moveTo(0, i * (h / 10)); ctx.lineTo(w, i * (h / 10)); ctx.stroke();
                    }

                    // Draw Curve
                    ctx.beginPath();
                    ctx.lineWidth = 3;
                    const gradient = ctx.createLinearGradient(0, h, w, 0);
                    gradient.addColorStop(0, '#3b82f6');
                    gradient.addColorStop(0.6, '#f97316');
                    gradient.addColorStop(1, '#ef4444');
                    ctx.strokeStyle = gradient;

                    ctx.moveTo(0, h * 0.85);
                    const segments = 100;
                    for (let i = 0; i <= segments; i++) {
                        const x = (i / segments) * w;
                        const freqFactor = (launchFrequency || 50) / 50;
                        const stressFactor = (materialStress || 50) / 50;
                        const noise = Math.sin(i * 0.2 + Date.now() * 0.002) * 5;
                        const y = (h * 0.85) - (Math.pow(i / segments, 2) * (h * 0.75) * freqFactor * stressFactor) + noise;
                        ctx.lineTo(x, y);
                    }
                    ctx.stroke();

                    animationFrame = requestAnimationFrame(draw);
                };

                draw();
                return () => cancelAnimationFrame(animationFrame);
            }, [launchFrequency, materialStress]);

            return (
                <div className="relative w-full h-40 bg-slate-950 rounded-lg overflow-hidden border border-slate-800 shadow-inner">
                    <canvas ref={canvasRef} width={800} height={200} className="w-full h-full opacity-80" />
                    <div className="absolute top-2 left-3 flex flex-col pointer-events-none">
                        <span className="text-[8px] font-mono text-slate-500 uppercase tracking-widest">Decay Vector</span>
                        <span className="text-orange-500 font-bold text-[10px]">LIVE MODEL</span>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [launchFreq, setLaunchFreq] = useState(65);
            const [materialStress, setMaterialStress] = useState(40);
            const [viewMode, setViewMode] = useState('reusable');

            const efficiencyGain = 40;
            const baselineInventory = 100;
            const reusableInventory = 60;
            const currentInventory = viewMode === 'reusable' ? reusableInventory : baselineInventory;
            const entropyIndex = ((launchFreq * materialStress) / 100).toFixed(2);

            return (
                <div className="h-full w-full bg-slate-950 text-slate-100 font-sans p-4 flex flex-col overflow-hidden">
                    {/* Header */}
                    <header className="flex justify-between items-center mb-4 pb-2 border-b border-slate-800">
                        <div className="flex items-center gap-3">
                            <div className="w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse" />
                            <h1 className="text-xl font-black tracking-tighter uppercase italic">Starship Entropy</h1>
                            <span className="text-[10px] bg-slate-800 px-2 py-0.5 rounded text-slate-400 font-mono">v4.0.2</span>
                        </div>
                        <div className="flex gap-6">
                            <div className="flex items-center gap-2">
                                <Activity className="text-blue-400 w-4 h-4" />
                                <div className="flex flex-col">
                                    <span className="text-[8px] text-slate-500 uppercase leading-none">Entropy Index</span>
                                    <span className="font-mono font-bold text-sm text-blue-400">{entropyIndex}</span>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 border-l border-slate-800 pl-6">
                                <Zap className="text-orange-400 w-4 h-4" />
                                <div className="flex flex-col">
                                    <span className="text-[8px] text-slate-500 uppercase leading-none">Reuse Gain</span>
                                    <span className="font-mono font-bold text-sm text-orange-400">+{efficiencyGain}%</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="flex-grow grid grid-cols-12 gap-4 min-h-0">
                        {/* Left - Params */}
                        <div className="col-span-4 flex flex-col gap-4 overflow-y-auto pr-1">
                            <div className="bg-slate-900/40 p-5 rounded-2xl border border-white/5 backdrop-blur-sm">
                                <h2 className="text-[10px] font-bold text-slate-500 uppercase mb-5 flex items-center gap-2 tracking-widest">
                                    <Layers className="w-3.5 h-3.5" /> Simulation Parameters
                                </h2>
                                <div className="space-y-6">
                                    <div>
                                        <div className="flex justify-between mb-2">
                                            <label className="text-xs font-semibold text-slate-400">Launch Frequency</label>
                                            <span className="text-blue-400 font-mono text-xs">{launchFreq} Hz</span>
                                        </div>
                                        <input
                                            type="range" min="1" max="100" value={launchFreq}
                                            onChange={(e) => setLaunchFreq(parseInt(e.target.value))}
                                            className="w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500"
                                        />
                                    </div>
                                    <div>
                                        <div className="flex justify-between mb-2">
                                            <label className="text-xs font-semibold text-slate-400">Material Stress</label>
                                            <span className="text-orange-400 font-mono text-xs">{materialStress} MPa</span>
                                        </div>
                                        <input
                                            type="range" min="1" max="100" value={materialStress}
                                            onChange={(e) => setMaterialStress(parseInt(e.target.value))}
                                            className="w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-orange-500"
                                        />
                                    </div>
                                </div>
                            </div>

                            {/* Efficiency Box */}
                            <div className="bg-slate-900/40 p-5 rounded-2xl border border-white/5 flex-grow backdrop-blur-sm">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-[10px] font-bold text-slate-500 uppercase flex items-center gap-2 tracking-widest">
                                        <BarChart3 className="w-3.5 h-3.5" /> Requirement Forecast
                                    </h2>
                                    <button
                                        onClick={() => setViewMode(v => v === 'reusable' ? 'baseline' : 'reusable')}
                                        className={`text-[9px] px-3 py-1 rounded-full border transition-all uppercase font-bold tracking-tighter ${viewMode === 'reusable' ? 'bg-blue-600/20 border-blue-500/50 text-blue-300 shadow-lg shadow-blue-500/10' : 'bg-slate-800 border-slate-700 text-slate-500'
                                            }`}
                                    >
                                        {viewMode === 'reusable' ? 'Reusable Cycle' : 'Baseline (New Build)'}
                                    </button>
                                </div>

                                <div className="flex items-end gap-4 h-24 mb-4 px-6">
                                    <div className="flex-1 flex flex-col items-center gap-2 h-full">
                                        <div className="w-full bg-slate-800/50 rounded-t-lg h-full border-x border-t border-white/5" />
                                        <span className="text-[9px] font-mono text-slate-500">BASELINE</span>
                                    </div>
                                    <div className="flex-1 flex flex-col items-center gap-2 h-full justify-end">
                                        <div
                                            className={`w-full rounded-t-lg transition-all duration-700 ease-out border-x border-t ${viewMode === 'reusable' ? 'bg-gradient-to-t from-orange-600 to-orange-400 border-orange-400/30 shadow-lg shadow-orange-500/20' : 'bg-slate-800/30 border-white/5'}`}
                                            style={{ height: `${(currentInventory / baselineInventory) * 100}%` }}
                                        />
                                        <span className={`text-[9px] font-mono ${viewMode === 'reusable' ? 'text-orange-400' : 'text-slate-500'}`}>MODEL</span>
                                    </div>
                                </div>

                                <div className="bg-black/20 p-3 rounded-lg border border-white/5 text-center">
                                    <p className="text-[10px] text-slate-400 font-mono tracking-tighter uppercase">
                                        Current Requirement: <span className="text-white font-bold text-xs ml-1">{currentInventory} units</span>
                                    </p>
                                </div>
                            </div>

                            <div className="bg-orange-500/10 border border-orange-500/30 p-3 rounded-xl flex gap-3 items-center">
                                <ShieldAlert className="w-4 h-4 text-orange-500 shrink-0" />
                                <p className="text-[10px] text-orange-200/80 leading-snug font-medium italic">Safety Protocol: Entropy shielding strictly maintained at 98.4% nominal capacity.</p>
                            </div>
                        </div>

                        {/* Right - Entropy Field */}
                        <div className="col-span-8 flex flex-col gap-4 min-h-0">
                            <div className="bg-slate-900/40 p-6 rounded-2xl border border-white/5 flex flex-col h-full backdrop-blur-sm overflow-hidden">
                                <div className="flex justify-between items-center mb-5">
                                    <h2 className="text-xs font-black text-white uppercase italic tracking-tighter flex items-center gap-2">
                                        Entropy Field Real-Time Visualization
                                    </h2>
                                    <div className="flex items-center gap-2.5 text-blue-400/70 text-[10px] font-mono bg-blue-500/5 px-3 py-1 rounded-full border border-blue-500/10">
                                        <RefreshCw className="w-3 h-3 animate-spin-slow" /> DATA_STREAMING_NOMINAL
                                    </div>
                                </div>

                                <div className="flex-grow flex flex-col min-h-0">
                                    <EntropyCanvas launchFrequency={launchFreq} materialStress={materialStress} />

                                    <div className="grid grid-cols-3 gap-4 mt-6">
                                        <div className="p-4 bg-slate-950/40 rounded-2xl border border-white/5 hover:border-orange-500/30 transition-colors group">
                                            <div className="flex items-center gap-2 mb-2 text-slate-500">
                                                <Thermometer className="w-3.5 h-3.5 text-orange-500 group-hover:scale-110 transition-transform" />
                                                <span className="text-[10px] font-bold uppercase tracking-widest text-slate-500">Thermal Vec</span>
                                            </div>
                                            <p className="text-xl font-mono text-white tracking-tighter">{(materialStress * 14.5).toFixed(0)}°C</p>
                                            <div className="mt-3 w-full bg-slate-800/50 h-1 rounded-full overflow-hidden">
                                                <div className="bg-gradient-to-r from-orange-600 to-orange-400 h-full transition-all duration-500" style={{ width: `${materialStress}%` }} />
                                            </div>
                                        </div>

                                        <div className="p-4 bg-slate-950/40 rounded-2xl border border-white/5 hover:border-blue-500/30 transition-colors group">
                                            <div className="flex items-center gap-2 mb-2 text-slate-500">
                                                <RefreshCw className="w-3.5 h-3.5 text-blue-500 group-hover:rotate-180 transition-transform duration-500" />
                                                <span className="text-[10px] font-bold uppercase tracking-widest text-slate-500">Flow Latency</span>
                                            </div>
                                            <p className="text-xl font-mono text-white tracking-tighter">{(120 / (launchFreq / 10 || 1)).toFixed(1)}ms</p>
                                            <div className="mt-3 w-full bg-slate-800/50 h-1 rounded-full overflow-hidden">
                                                <div className="bg-gradient-to-r from-blue-600 to-blue-400 h-full transition-all duration-500" style={{ width: `${100 - launchFreq}%` }} />
                                            </div>
                                        </div>

                                        <div className="p-4 bg-slate-950/40 rounded-2xl border border-white/5 hover:border-green-500/30 transition-colors group">
                                            <div className="flex items-center gap-2 mb-2 text-slate-500">
                                                <Info className="w-3.5 h-3.5 text-green-500 group-hover:scale-110 transition-transform" />
                                                <span className="text-[10px] font-bold uppercase tracking-widest text-slate-500">Life Remaining</span>
                                            </div>
                                            <p className="text-xl font-mono text-white tracking-tighter">{Math.max(1, Math.floor(25 - (entropyIndex / 2)))} CYC</p>
                                            <div className="mt-3 w-full bg-slate-800/50 h-1 rounded-full overflow-hidden">
                                                <div className="bg-gradient-to-r from-green-600 to-green-400 h-full transition-all duration-500" style={{ width: `${Math.max(0, 100 - entropyIndex)}%` }} />
                                            </div>
                                        </div>
                                    </div>

                                    <div className="mt-auto pt-6 flex gap-3">
                                        <button className="flex-2 bg-blue-600 hover:bg-blue-500 text-white font-black px-8 py-3 rounded-xl transition-all uppercase tracking-tighter italic text-xs shadow-lg shadow-blue-500/20 active:scale-95 flex items-center justify-center gap-2">
                                            <BarChart3 className="w-4 h-4" /> Export Simulation Data
                                        </button>
                                        <button className="flex-1 border border-white/10 hover:bg-white/5 text-slate-400 font-black py-3 rounded-xl transition-all uppercase tracking-tighter italic text-xs active:scale-95">
                                            Calibration
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className="mt-4 flex justify-between items-center text-slate-600 text-[9px] font-mono tracking-widest uppercase border-t border-slate-800/50 pt-2">
                        <div className="flex gap-4">
                            <span>© 2026 Orbital Dynamics</span>
                            <span className="text-slate-800">|</span>
                            <span className="text-slate-500">Station ID: OD-ST-99</span>
                        </div>
                        <div className="flex gap-6">
                            <span className="flex items-center gap-1.5"><div className="w-1.5 h-1.5 bg-green-500 rounded-full" /> Security: LVL 5</span>
                            <span className="flex items-center gap-1.5"><div className="w-1.5 h-1.5 bg-green-500 rounded-full animate-ping" /> Connection: STABLE</span>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        console.log("Starship Entropy Visualizer: Rendered.");
    </script>
</body>

</html>